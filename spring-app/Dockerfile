FROM openjdk:16-alpine3.13

ARG JAR_FILE

ENV DATABASE_URL $DATABASE_URL
ENV DATABASE_DIALECT $DATABASE_DIALECT

ENV CAKEHOUSE_EMAIL_ADDRESS $CAKEHOUSE_EMAIL_ADDRESS
ENV CAKEHOUSE_EMAIL_PASSWORD $CAKEHOUSE_EMAIL_PASSWORD
ENV CAKEHOUSE_EMAIL_HOST $CAKEHOUSE_EMAIL_HOST
ENV CAKEHOUSE_EMAIL_SMTP_PORT $CAKEHOUSE_EMAIL_SMTP_PORT

COPY ${JAR_FILE} app.jar

CMD java \
    -Djava.security.egd=file:/dev/./urandom \
    -jar /app.jar